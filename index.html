<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å®¶å…· AR å±•ç¤º</title>
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.3.0/model-viewer.min.js"></script>
    <style>
        body { margin: 0; background-color: #f7f7f7; font-family: sans-serif; }
        model-viewer { width: 100%; height: 100vh; }
        /* åŠ è½½æ—¶çš„æç¤ºæ–‡å­— */
        #loading-text {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            font-size: 18px; color: #666;
        }
        .ar-button {
            background-color: white; border-radius: 4px; border: none;
            position: absolute; bottom: 30px; left: 50%; transform: translateX(-50%);
            padding: 12px 24px; font-size: 16px; box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        /* éšè—é»˜è®¤æ’æ§½ï¼Œç›´åˆ°æ¨¡å‹åŠ è½½å®Œæ¯• */
        model-viewer:not(.loaded) .ar-button { display: none; }
    </style>
</head>
<body>

    <div id="loading-text">æ­£åœ¨å‡†å¤‡æ¨¡å‹...</div>

    <model-viewer 
        id="main-viewer"
        src="" 
        ios-src=""
        alt="å®¶å…·æ¨¡å‹å±•ç¤º"
        auto-rotate
        camera-controls
        ar
        ar-modes="webxr scene-viewer quick-look"
        shadow-intensity="1"
        ar-scale="fixed"
    >
        <button slot="ar-button" class="ar-button">
            ğŸ‘‹ åœ¨æ‚¨çš„æˆ¿é—´æŸ¥çœ‹ (AR)
        </button>
    </model-viewer>

    <script>
        // --- æ ¸å¿ƒè‡ªåŠ¨åŒ–è„šæœ¬ ---

        // 1. è·å–ç½‘é¡µé‡Œçš„ model-viewer ç»„ä»¶å’ŒåŠ è½½æ–‡å­—
        const viewer = document.querySelector('#main-viewer');
        const loadingText = document.querySelector('#loading-text');

        // 2. è¯»å–å½“å‰ç½‘é¡µ URL ä¸­é—®å·åé¢çš„å‚æ•°
        const urlParams = new URLSearchParams(window.location.search);
        // è·å– 'model' å‚æ•°çš„å€¼ (ä¾‹å¦‚ sofa01)
        const modelName = urlParams.get('model');

        // 3. åˆ¤æ–­ï¼šå¦‚æœ URL é‡Œæä¾›äº†æ¨¡å‹åå­—
        if (modelName) {
           // ä¿®æ”¹åï¼šç›´æ¥åœ¨å½“å‰ç›®å½•ä¸‹æ‰¾å¯¹åº”åå­—çš„æ–‡ä»¶
            const glbPath = `${modelName}.glb`;
            const usdzPath = `${modelName}.usdz`;

            // æŠŠæ‹¼æ¥å¥½çš„è·¯å¾„è®¾ç½®ç»™ model-viewer ç»„ä»¶
            viewer.setAttribute('src', glbPath);

            viewer.setAttribute('ios-src', usdzPath
